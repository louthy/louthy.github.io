<html ><head ><link rel="stylesheet" type="text/css" href="doc.css"></link></head><body ><div class="nav-bar"><a class="nav-bar-link" href="../index.htm">API Reference</a> \ <a class="nav-bar-link" href="../Echo/index.htm">Echo</a> \ <span class="nav-bar-link" href="ProcessHub_.htm">ProcessHub</span></div><div class="nav-panel"><h3 >PROPERTIES</h3><a class="nav-link" href="#Connections">Connections</a><a class="nav-link" href="#RouteValidator">RouteValidator</a><h3 >METHODS</h3><a class="nav-link" href="#CloseConnection">CloseConnection(ClientConnectionId)</a><a class="nav-link" href="#OpenConnection">OpenConnection(Action&lt;ClientMessageDTO&gt;)</a><a class="nav-link" href="#Subscribe">Subscribe(ClientConnectionId, ProcessId, ProcessId)</a><a class="nav-link" href="#TouchConnection">TouchConnection(ClientConnectionId)</a><a class="nav-link" href="#UnSubscribe">UnSubscribe(ClientConnectionId, ProcessId, ProcessId)</a></div><div class="content-panel"><h1 >ProcessHub Class</h1><p ></p><div class="left"><div class="section"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="ident">ProcessHub</span></div></div></div><div class="right"><div class="section"><div class="section_title">NAMESPACE</div>Echo</div></div><h2 >Properties</h2><div class="member-title"><a name="Connections"></a>Connections</div><div class="section"><div class="left"><div class="section_title">SUMMARY</div><p ><span >Active client connections  </span></p></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="keyword">static</span> <span class="ident">Map</span>&lt;<span class="ident">ClientConnectionId</span>, <span class="ident">ClientConnection</span>&gt; <span class="ident">Connections</span>  { <span class="keyword">get</span>; }</div><div class="section_title">RETURNS</div><div class="code"><div class="member-title"><span class="ident">Map</span>&lt;<span class="ident">ClientConnectionId</span>, <span class="ident">ClientConnection</span>&gt;</div><div class="normal"></div></div></div></div><div class="member-title"><a name="RouteValidator"></a>RouteValidator</div><div class="section"><div class="left"><div class="section_title">SUMMARY</div><p ><span >Inject a function that validates incoming message destinations  </span></p></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="keyword">static</span> <span class="ident">Func</span>&lt;<span class="ident">ProcessId</span>, <span class="keyword">bool</span>&gt; <span class="ident">RouteValidator</span>  { <span class="keyword">get</span>; <span class="keyword">set</span>; }</div><div class="section_title">RETURNS</div><div class="code"><div class="member-title"><span class="ident">Func</span>&lt;<span class="ident">ProcessId</span>, <span class="keyword">bool</span>&gt;</div><div class="normal"></div></div></div></div><h2 >Methods</h2><div class="member-title"><a name="CloseConnection"></a>CloseConnection(ClientConnectionId)<div class="source-link-cont"><a class="source-link" href="#" onclick="document.getElementById(&#39;code-CloseConnection__ClientConnectionId__id_&#39;).style.display=&#39;&#39;;">SOURCE</a></div></div><div class="section"><div class="left"><div class="section_title">SUMMARY</div><p ><span >Register a connection by ID </span></p><div class="section_title">PARAMETERS</div><div class="arg"><div class="arg-header"><div class="arg-name">id</div><div class="arg-type"><span class="ident">ClientConnectionId</span></div></div><div class="arg-desc">Client connection ID</div></div></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="keyword">static</span> <span class="ident">Unit</span> <span class="ident">CloseConnection</span>(<span class="ident">ClientConnectionId</span> id)</div></div><div style="display:none" id="code-CloseConnection__ClientConnectionId__id_"><div class="section_title">SOURCE</div><div class="code">
            connections.Find(id).Iter(conn =&gt; conn.Dispose());
            lock (sync)
            {
                connections = connections.Remove(id);
            }
            return unit;
        </div></div></div><div class="member-title"><a name="OpenConnection"></a>OpenConnection(Action&lt;ClientMessageDTO&gt;)<div class="source-link-cont"><a class="source-link" href="#" onclick="document.getElementById(&#39;code-OpenConnection__Action_ClientMessageDTO_tell_&#39;).style.display=&#39;&#39;;">SOURCE</a></div></div><div class="section"><div class="left"><div class="section_title">SUMMARY</div><p ><span >Register a connection by ID </span></p><div class="section_title">PARAMETERS</div><div class="arg"><div class="arg-header"><div class="arg-name">tell</div><div class="arg-type"><span class="ident">Action</span>&lt;<span class="ident">ClientMessageDTO</span>&gt;</div></div></div></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="keyword">static</span> <span class="ident">ClientConnectionId</span> <span class="ident">OpenConnection</span>(<span class="ident">Action</span>&lt;<span class="ident">ClientMessageDTO</span>&gt; tell)</div><div class="section_title">RETURNS</div><div class="code"><div class="member-title"><span class="ident">ClientConnectionId</span></div><div class="normal"></div></div></div><div style="display:none" id="code-OpenConnection__Action_ClientMessageDTO_tell_"><div class="section_title">SOURCE</div><div class="code">
            var id = ClientConnectionId.Generate();
            var conn = ClientConnection.New(id, tell);
            lock (sync)
            {
                connections = connections.AddOrUpdate(id, conn);
            }
            return id;
        </div></div></div><div class="member-title"><a name="Subscribe"></a>Subscribe(ClientConnectionId, ProcessId, ProcessId)<div class="source-link-cont"><a class="source-link" href="#" onclick="document.getElementById(&#39;code-Subscribe__ClientConnectionId__id__ProcessId__pub__ProcessId__sub_&#39;).style.display=&#39;&#39;;">SOURCE</a></div></div><div class="section"><div class="left"><div class="section_title">SUMMARY</div><p ><span >Subscribe  </span></p><div class="section_title">PARAMETERS</div><div class="arg"><div class="arg-header"><div class="arg-name">id</div><div class="arg-type"><span class="ident">ClientConnectionId</span></div></div></div><div class="arg"><div class="arg-header"><div class="arg-name">pub</div><div class="arg-type"><span class="ident">ProcessId</span></div></div></div><div class="arg"><div class="arg-header"><div class="arg-name">sub</div><div class="arg-type"><span class="ident">ProcessId</span></div></div></div></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="ident">Subscribe</span>(<span class="ident">ClientConnectionId</span> id, <span class="ident">ProcessId</span> pub, <span class="ident">ProcessId</span> sub)</div><div class="section_title">RETURNS</div><div class="code"><div class="member-title"><span class="keyword">bool</span></div><div class="normal"></div></div></div><div style="display:none" id="code-Subscribe__ClientConnectionId__id__ProcessId__pub__ProcessId__sub_"><div class="section_title">SOURCE</div><div class="code">
            connections.Find(id).Map(c =&gt; c.AddSubscriber(pub, sub)).Map(_ =&gt; true).IfNone(false)</div></div></div><div class="member-title"><a name="TouchConnection"></a>TouchConnection(ClientConnectionId)<div class="source-link-cont"><a class="source-link" href="#" onclick="document.getElementById(&#39;code-TouchConnection__ClientConnectionId__id_&#39;).style.display=&#39;&#39;;">SOURCE</a></div></div><div class="section"><div class="left"><div class="section_title">SUMMARY</div><p ><span >Confirm the client is still there </span></p><div class="section_title">PARAMETERS</div><div class="arg"><div class="arg-header"><div class="arg-name">id</div><div class="arg-type"><span class="ident">ClientConnectionId</span></div></div><div class="arg-desc">ID</div></div></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="ident">TouchConnection</span>(<span class="ident">ClientConnectionId</span> id)</div><div class="section_title">RETURNS</div><div class="code"><div class="member-title"><span class="keyword">bool</span></div><div class="normal"><span >True if the connection is still active</span></div></div></div><div style="display:none" id="code-TouchConnection__ClientConnectionId__id_"><div class="section_title">SOURCE</div><div class="code">
            connections.Find(id).Map(c =&gt; c.Touch()).Map(_ =&gt; true).IfNone(false)</div></div></div><div class="member-title"><a name="UnSubscribe"></a>UnSubscribe(ClientConnectionId, ProcessId, ProcessId)<div class="source-link-cont"><a class="source-link" href="#" onclick="document.getElementById(&#39;code-UnSubscribe__ClientConnectionId__id__ProcessId__pub__ProcessId__sub_&#39;).style.display=&#39;&#39;;">SOURCE</a></div></div><div class="section"><div class="left"><div class="section_title">SUMMARY</div><p ><span >Un-subscribe  </span></p><div class="section_title">PARAMETERS</div><div class="arg"><div class="arg-header"><div class="arg-name">id</div><div class="arg-type"><span class="ident">ClientConnectionId</span></div></div></div><div class="arg"><div class="arg-header"><div class="arg-name">pub</div><div class="arg-type"><span class="ident">ProcessId</span></div></div></div><div class="arg"><div class="arg-header"><div class="arg-name">sub</div><div class="arg-type"><span class="ident">ProcessId</span></div></div></div></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="ident">UnSubscribe</span>(<span class="ident">ClientConnectionId</span> id, <span class="ident">ProcessId</span> pub, <span class="ident">ProcessId</span> sub)</div><div class="section_title">RETURNS</div><div class="code"><div class="member-title"><span class="keyword">bool</span></div><div class="normal"></div></div></div><div style="display:none" id="code-UnSubscribe__ClientConnectionId__id__ProcessId__pub__ProcessId__sub_"><div class="section_title">SOURCE</div><div class="code">
            connections.Find(id).Map(c =&gt; c.RemoveSubscriber(pub, sub)).Map(_ =&gt; true).IfNone(false)</div></div></div></div></body></html>