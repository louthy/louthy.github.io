<html ><head ><link rel="stylesheet" type="text/css" href="doc.css"></link></head><body ><div class="nav-bar"><a class="nav-bar-link" href="https://louthy.github.io/">API Reference</a> \ <a class="nav-bar-link" href="../LanguageExt.Session/index.htm">LanguageExt.Session</a> \ <span class="nav-bar-link" href="SessionVector_.htm">SessionVector</span></div><div class="nav-panel"><h3 >CONSTRUCTORS</h3><a class="nav-link" href="#SessionVector">SessionVector(Map&lt;string, ValueVector&gt;, DateTime, int, Map&lt;string, object&gt;)</a><h3 >FIELDS</h3><a class="nav-link" href="#TimeoutSeconds">TimeoutSeconds</a><h3 >PROPERTIES</h3><a class="nav-link" href="#Data">Data</a><a class="nav-link" href="#Expires">Expires</a><a class="nav-link" href="#LastAccess">LastAccess</a><h3 >METHODS</h3><a class="nav-link" href="#ClearKeyValue">ClearKeyValue(long, string)</a><a class="nav-link" href="#Create">Create(int, VectorConflictStrategy, Map&lt;string, object&gt;)</a><a class="nav-link" href="#SetKeyValue">SetKeyValue(long, string, object, VectorConflictStrategy)</a><a class="nav-link" href="#Touch">Touch()</a></div><div class="content-panel"><h1 >SessionVector Class</h1><p ></p><div class="left"><div class="section"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="keyword">class</span> <span class="ident">SessionVector</span></div></div></div><div class="right"><div class="section"><div class="section_title">NAMESPACE</div>LanguageExt.Session</div></div><h2 >Constructors</h2><div class="member-title"><a name="SessionVector"></a>SessionVector(Map&lt;string, ValueVector&gt;, DateTime, int, Map&lt;string, object&gt;)<div class="source-link-cont"><a class="source-link" href="#" onclick="document.getElementById(&#39;code-SessionVector__Map_string_ValueVector_data__DateTime__lastAccess__int__timeoutSeconds__Map_string_object_initialState_&#39;).style.display=&#39;&#39;;">SOURCE</a></div></div><div class="section"><div class="left"><div class="section_title">SUMMARY</div><p ><span >Ctor </span></p><div class="section_title">PARAMETERS</div><div class="arg"><div class="arg-header"><div class="arg-name">data</div><div class="arg-type"><span class="ident">Map</span>&lt;<span class="keyword">string</span>, <span class="ident">ValueVector</span>&gt;</div></div></div><div class="arg"><div class="arg-header"><div class="arg-name">lastAccess</div><div class="arg-type"><span class="ident">DateTime</span></div></div></div><div class="arg"><div class="arg-header"><div class="arg-name">timeoutSeconds</div><div class="arg-type"><span class="keyword">int</span></div></div></div><div class="arg"><div class="arg-header"><div class="arg-name">initialState</div><div class="arg-type"><span class="ident">Map</span>&lt;<span class="keyword">string</span>, <span class="keyword">object</span>&gt;</div></div></div></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="keyword">ctor</span> <span class="ident">SessionVector</span>(<span class="ident">Map</span>&lt;<span class="keyword">string</span>, <span class="ident">ValueVector</span>&gt; data, <span class="ident">DateTime</span> lastAccess, <span class="keyword">int</span> timeoutSeconds, <span class="ident">Map</span>&lt;<span class="keyword">string</span>, <span class="keyword">object</span>&gt; initialState)</div></div><div style="display:none" id="code-SessionVector__Map_string_ValueVector_data__DateTime__lastAccess__int__timeoutSeconds__Map_string_object_initialState_"><div class="section_title">SOURCE</div><div class="code">
            this.data = data;
            this.lastAccess = lastAccess;
            TimeoutSeconds = timeoutSeconds;
            data = initialState.Map(obj =&gt; new ValueVector(0, List(obj)));
        </div></div></div><h2 >Fields</h2><div class="member-title"><a name="TimeoutSeconds"></a>TimeoutSeconds</div><div class="section"><div class="left"></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">int</span> <span class="ident">TimeoutSeconds</span></div></div></div><h2 >Properties</h2><div class="member-title"><a name="Data"></a>Data</div><div class="section"><div class="left"><div class="section_title">SUMMARY</div><p ><span >Key/value store for the session </span></p></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="ident">Map</span>&lt;<span class="keyword">string</span>, <span class="ident">ValueVector</span>&gt; <span class="ident">Data</span>  { <span class="keyword">get</span>; }</div><div class="section_title">RETURNS</div><div class="code"><div class="member-title"><span class="ident">Map</span>&lt;<span class="keyword">string</span>, <span class="ident">ValueVector</span>&gt;</div><div class="normal"></div></div></div></div><div class="member-title"><a name="Expires"></a>Expires</div><div class="section"><div class="left"><div class="section_title">SUMMARY</div><p ><span >The date-time of expiry </span></p></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="ident">DateTime</span> <span class="ident">Expires</span>  { <span class="keyword">get</span>; }</div><div class="section_title">RETURNS</div><div class="code"><div class="member-title"><span class="ident">DateTime</span></div><div class="normal"></div></div></div></div><div class="member-title"><a name="LastAccess"></a>LastAccess</div><div class="section"><div class="left"><div class="section_title">SUMMARY</div><p ><span >UTC date of last access </span></p></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="ident">DateTime</span> <span class="ident">LastAccess</span>  { <span class="keyword">get</span>; }</div><div class="section_title">RETURNS</div><div class="code"><div class="member-title"><span class="ident">DateTime</span></div><div class="normal"></div></div></div></div><h2 >Methods</h2><div class="member-title"><a name="ClearKeyValue"></a>ClearKeyValue(long, string)<div class="source-link-cont"><a class="source-link" href="#" onclick="document.getElementById(&#39;code-ClearKeyValue__long__vector__string__key_&#39;).style.display=&#39;&#39;;">SOURCE</a></div></div><div class="section"><div class="left"><div class="section_title">SUMMARY</div><p ><span >Remove a key from the session key/value store </span></p><div class="section_title">PARAMETERS</div><div class="arg"><div class="arg-header"><div class="arg-name">vector</div><div class="arg-type"><span class="keyword">long</span></div></div></div><div class="arg"><div class="arg-header"><div class="arg-name">key</div><div class="arg-type"><span class="keyword">string</span></div></div></div></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="keyword">void</span> <span class="ident">ClearKeyValue</span>(<span class="keyword">long</span> vector, <span class="keyword">string</span> key)</div></div><div style="display:none" id="code-ClearKeyValue__long__vector__string__key_"><div class="section_title">SOURCE</div><div class="code">
            lock (sync)
            {
                data = data.Remove(key);
            }
            Touch();
        </div></div></div><div class="member-title"><a name="Create"></a>Create(int, VectorConflictStrategy, Map&lt;string, object&gt;)<div class="source-link-cont"><a class="source-link" href="#" onclick="document.getElementById(&#39;code-Create__int__timeout__VectorConflictStrategy__strategy__Map_string_object_initialState_&#39;).style.display=&#39;&#39;;">SOURCE</a></div></div><div class="section"><div class="left"><div class="section_title">PARAMETERS</div><div class="arg"><div class="arg-header"><div class="arg-name">timeout</div><div class="arg-type"><span class="keyword">int</span></div></div></div><div class="arg"><div class="arg-header"><div class="arg-name">strategy</div><div class="arg-type"><span class="ident">VectorConflictStrategy</span></div></div></div><div class="arg"><div class="arg-header"><div class="arg-name">initialState</div><div class="arg-type"><span class="ident">Map</span>&lt;<span class="keyword">string</span>, <span class="keyword">object</span>&gt;</div></div></div></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="keyword">static</span> <span class="ident">SessionVector</span> <span class="ident">Create</span>(<span class="keyword">int</span> timeout, <span class="ident">VectorConflictStrategy</span> strategy, <span class="ident">Map</span>&lt;<span class="keyword">string</span>, <span class="keyword">object</span>&gt; initialState)</div><div class="section_title">RETURNS</div><div class="code"><div class="member-title"><span class="ident">SessionVector</span></div><div class="normal"></div></div></div><div style="display:none" id="code-Create__int__timeout__VectorConflictStrategy__strategy__Map_string_object_initialState_"><div class="section_title">SOURCE</div><div class="code">
            new SessionVector(Map.empty&lt;string, ValueVector&gt;(), DateTime.UtcNow, timeout, initialState)</div></div></div><div class="member-title"><a name="SetKeyValue"></a>SetKeyValue(long, string, object, VectorConflictStrategy)<div class="source-link-cont"><a class="source-link" href="#" onclick="document.getElementById(&#39;code-SetKeyValue__long__time__string__key__object__value__VectorConflictStrategy__strategy_&#39;).style.display=&#39;&#39;;">SOURCE</a></div></div><div class="section"><div class="left"><div class="section_title">SUMMARY</div><p ><span >Add or update a key in the session key/value store </span></p><div class="section_title">PARAMETERS</div><div class="arg"><div class="arg-header"><div class="arg-name">time</div><div class="arg-type"><span class="keyword">long</span></div></div></div><div class="arg"><div class="arg-header"><div class="arg-name">key</div><div class="arg-type"><span class="keyword">string</span></div></div></div><div class="arg"><div class="arg-header"><div class="arg-name">value</div><div class="arg-type"><span class="keyword">object</span></div></div></div><div class="arg"><div class="arg-header"><div class="arg-name">strategy</div><div class="arg-type"><span class="ident">VectorConflictStrategy</span></div></div></div></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="keyword">void</span> <span class="ident">SetKeyValue</span>(<span class="keyword">long</span> time, <span class="keyword">string</span> key, <span class="keyword">object</span> value, <span class="ident">VectorConflictStrategy</span> strategy)</div></div><div style="display:none" id="code-SetKeyValue__long__time__string__key__object__value__VectorConflictStrategy__strategy_"><div class="section_title">SOURCE</div><div class="code">
            lock (sync)
            {
                data = data.Find(key)
                           .Map(vector =&gt; data.AddOrUpdate(key, vector.AddValue(time, value, strategy)))
                           .IfNone(() =&gt; data.AddOrUpdate(key, new ValueVector(time, List(value))));
            }
            Touch();
        </div></div></div><div class="member-title"><a name="Touch"></a>Touch()<div class="source-link-cont"><a class="source-link" href="#" onclick="document.getElementById(&#39;code-Touch__&#39;).style.display=&#39;&#39;;">SOURCE</a></div></div><div class="section"><div class="left"><div class="section_title">SUMMARY</div><p ><span >Invoke to keep the session alive </span></p></div><div class="right"><div class="section_title">DECLARATION</div><div class="code"><span class="keyword">public</span> <span class="keyword">void</span> <span class="ident">Touch</span>()</div></div><div style="display:none" id="code-Touch__"><div class="section_title">SOURCE</div><div class="code">
            lastAccess = DateTime.UtcNow;
            expires = lastAccess.AddSeconds(TimeoutSeconds);
        </div></div></div></div></body></html>